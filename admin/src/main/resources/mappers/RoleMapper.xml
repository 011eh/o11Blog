<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.o11eh.servicedemo.admin.mapper.RoleMapper">

    <resultMap id="role" type="com.o11eh.servicedemo.admin.entry.Role">
        <result property="permissionIds" column="permissionIds"
                typeHandler="com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler"/>
    </resultMap>
    <select id="selectPage" resultMap="role">
        select r.*, json_arrayagg(permission_id) permissionIds
        from back_role_permission rp
                 join back_role r on rp.role_id = r.id
        group by role_id
    </select>
</mapper>
